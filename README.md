# Reversi_5C

大学 2 の時、開発実習で作成したリバーシの思考ルーチン  
名前は 5 回作り直したからと、高速化のために Python -> C++ に言語を変えたからこうなった。

実機のロボットに組み込み、GUI で操作できるように作成したが遊べるようにするのが大変だったので
C++で書いた部分(思考ルーチンのみ)を置いておく。

今見直すとソースコードがかなり汚くてはずかしすぎるｗ

## 遊び方

`[a]`の所に石を置きたいのなら `a`と入力する。

```console
        @ BLACK TURN @

    0  1  2  3  4  5  6  7
   ------------------------
A |                        |
B |                        |
C |         [a]            |
D |      [b] X  @          |
E |          @  X [c]      |
F |            [d]         |
G |                        |
H |                        |
   ------------------------
Evaluation : 937
Count: @=2 X=2
a~z to put >> a
```

## 探索

基本的には αβ 探索 & 置換表 を組み合わせた MTD(f)を使用して探索を行う。
高速化のためボードにはビットボードを使ったり、終盤には専用にチューニングした αβ 探索 & 置換表を用いるような工夫をしている。

## 評価関数

評価関数には Logistello を参考にしたパターンによるものを使用した。
基本的には重線形回帰を用い、30 通りの評価関数を用いる(ボードは 64 マス、初期設置 4 個なので 60 手あるので 2 手毎に評価関数が変わる)。
インターネットから取得した棋譜データ約 30 万件を最小二乗法を用いて学習させた。

## 探索速度（だいたい）

| 中盤探索（20 ターン目） | 探索時間 (s) | ノード数 |
| ----------------------- | ------------ | -------- |
| 6 手読み                | 0.0488       | 28084    |
| 9 手読み                | 0.582        | 539765   |

| 終盤探索（読み切り） | 探索時間 (s) | ノード数  |
| -------------------- | ------------ | --------- |
| 15 手読み            | 0.0822       | 812462    |
| 20 手読み            | 11.1         | 105727987 |

おすすめコンパイルオプション

```console
g++ -fPIC -O2 -flto -mtune=native -march=native robot_c.cpp
```

# 参考ページ

-   リバーシプログラムの作り方
    http://www.es-cube.net/es-cube/reversi/sample/index.html
-   オセロプログラムの作り方
    http://hp.vector.co.jp/authors/VA015468/platina/algo/
-   強いオセロプログラムの内部動作
    http://www.amy.hi-ho.ne.jp/okuhara/howtoj.htm
-   マイケル・ブロー(1997)「Experiments with Multi-ProbCut and a New
    High-Quality Evaluation Function for Othello」
    https://skatgame.net/mburo/publications.html
